<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>生活缴费服务 - 彦祖之家</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#f97316',
                        notice: '#ef4444',
                        techCyan: '#00CFFD',
                        techPurple: '#7B61FF',
                        discount: '#FF4D4F',
                    },
                    fontFamily: {
                        sans: ['PingFang SC', 'Helvetica Neue', 'Arial', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .product-shadow {
                box-shadow: 0 4px 12px rgba(22, 93, 255, 0.08);
                transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .product-shadow:hover {
                transform: translateY(-3px);
                box-shadow: 0 8px 20px rgba(22, 93, 255, 0.15);
            }
            .divider {
                height: 1px;
                background: linear-gradient(90deg, transparent, #e5e7eb, transparent);
            }
            .notice-item {
                transition: background-color 0.2s ease;
            }
            .notice-item:hover {
                background-color: rgba(22, 93, 255, 0.03);
            }
            .tag {
                @apply inline-block px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800;
            }
            .select-btn {
                @apply px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 border border-gray-200 flex-shrink-0;
            }
            .select-btn.active {
                @apply bg-primary text-white border-primary shadow-md;
            }
            .amount-btn {
                @apply px-3 py-1.5 rounded-md text-sm border border-gray-200 transition-all;
            }
            .amount-btn.active {
                @apply bg-primary/10 text-primary border-primary;
            }
            .bottom-tab {
                @apply fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around items-center h-16 z-50 shadow-lg;
            }
            .tab-item {
                @apply flex flex-col items-center justify-center flex-1 text-gray-500 hover:text-primary transition-colors;
            }
            .tab-item.active {
                @apply text-primary;
            }
            .discount-badge {
                @apply absolute -top-2 -right-2 bg-discount text-white text-xs font-bold px-2 py-1 rounded-full shadow-md transform rotate-3;
            }
            .content-fade-in {
                animation: fadeIn 0.5s ease forwards;
            }
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
        }
    </style>
<style>
    body { 
        padding-bottom: 4rem; 
        background-color: #f8fafc;
    }
    .faq-section {
        position: relative;
        background-color: white;
        border-radius: 1rem;
        box-shadow: 0 10px 15px -3px rgba(22, 93, 255, 0.05), 0 4px 6px -2px rgba(22, 93, 255, 0.03);
        border: 1px solid #e5e7eb;
        padding: 1.5rem;
        margin-bottom: 2.5rem;
        overflow: hidden;
    }
    .faq-title-wrap {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
    }
    .faq-title-icon {
        width: 2rem;
        height: 2rem;
        border-radius: 50%;
        background-color: rgba(22, 93, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #165DFF;
    }
    .faq-item {
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        overflow: hidden;
        transition: all 0.2s ease;
    }
    .faq-item:hover {
        border-color: rgba(22, 93, 255, 0.2);
        box-shadow: 0 2px 4px rgba(22, 93, 255, 0.05);
    }
    .faq-btn {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem;
        text-align: left;
        background-color: #f9fafb;
        border: none;
        cursor: pointer;
        font-size: 0.9375rem;
        color: #1f2937;
        font-weight: 500;
    }
    .faq-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
        background-color: white;
    }
    .faq-content-inner {
        padding: 0.75rem;
        font-size: 0.875rem;
        color: #4b5563;
        line-height: 1.5;
    }
    .faq-item.active .faq-content {
        max-height: 200px;
    }
    .faq-item.active .faq-icon {
        transform: rotate(180deg);
        color: #165DFF;
    }
    .faq-icon {
        transition: all 0.3s ease;
        color: #4b5563;
    }
    .faq-help-text {
        margin-top: 1rem;
        text-align: center;
        font-size: 0.875rem;
        color: #4b5563;
    }
    .faq-link {
        color: #165DFF;
        text-decoration: none;
        font-weight: 500;
    }
    .faq-link:hover {
        text-decoration: underline;
    }
    .notice-container { 
        max-height: 180px;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: #e5e7eb transparent;
    }
    .notice-container::-webkit-scrollbar {
        width: 4px;
    }
    .notice-container::-webkit-scrollbar-thumb {
        background-color: #e5e7eb;
        border-radius: 2px;
    }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    #orderModal { z-index: 100; }
    .order-info-item { @apply flex justify-between py-2 border-b border-gray-100 last:border-0; }
    .order-info-label { @apply text-gray-500 text-sm; }
    .order-info-value { @apply font-medium text-gray-800; }
    .order-highlight { @apply text-primary font-bold; }
    .copy-toast { @apply fixed top-20 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-4 py-2 rounded-lg text-sm z-200 opacity-0 transition-opacity duration-300; }
    .select-btn, .amount-btn, #orderBtn { transform: translateY(0); transition: all 0.2s ease; }
    .select-btn:active, .amount-btn:active, #orderBtn:active { transform: translateY(1px); }
    .product-img-loading {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
    }
    @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }
    .notice-wrap {
        background: linear-gradient(180deg, #ffffff 0%, #f9fbff 100%);
        border: 1px solid #e8f0fe;
        box-shadow: 0 2px 8px rgba(22, 93, 255, 0.05);
    }
    .notice-header {
        border-bottom: 1px solid #f0f5ff;
    }
    .scroll-container {
        overflow-x: auto;
        scrollbar-width: none;
        -ms-overflow-style: none;
        padding-bottom: 4px;
    }
    .scroll-container::-webkit-scrollbar {
        display: none;
    }
    .scroll-content {
        display: flex;
        gap: 10px;
        width: max-content;
    }
</style>
</head>
<body class="font-sans">
    <div class="container mx-auto px-4 py-6 max-w-4xl">
        
        <!-- 通知公告栏 -->
        <div class="notice-wrap rounded-xl p-4 mb-6 content-fade-in">
            <div class="notice-header pb-3 mb-3 flex justify-between items-center">
                <div class="flex items-center gap-2">
                    <i class="fa fa-bell text-primary"></i>
                    <h3 class="font-medium text-gray-800">服务通知</h3>
                </div>
                <span class="text-xs text-gray-500">滑动查看⇩</span>
            </div>
            <div class="notice-container" id="noticeList"></div>
            <!-- 新增入群按钮 -->
            <div class="mt-3 pt-3 border-t border-gray-100">
                <a href="http://t.me/huafeiXL1" target="_blank" class="block w-full py-2 bg-primary text-white rounded-lg text-center text-sm font-medium hover:bg-primary/90 transition-colors">
                    <i class="fa fa-telegram mr-1"></i>加入不禁言交流群
                </a>
            </div>
        </div>

        <!-- 缴费产品卡片 -->
        <div id="products" class="bg-white rounded-2xl shadow-lg border border-primary/10 p-6 mb-6 overflow-hidden relative product-shadow content-fade-in">
            <div class="absolute top-0 left-0 w-32 h-32 bg-primary/5 rounded-full -translate-x-1/2 -translate-y-1/2"></div>
            <div class="absolute bottom-0 right-0 w-24 h-24 bg-techCyan/5 rounded-full translate-x-1/4 translate-y-1/4"></div>
            
            <div class="flex items-center mb-6 relative z-10">
                <div class="w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center mr-2">
                    <i class="fa fa-th-list text-primary"></i>
                </div>
                <h2 class="text-xl font-bold text-gray-800">生活充值</h2>
                <div class="discount-badge">
                    <i class="fa fa-tag mr-1"></i>8折
                </div>
            </div>

            <div id="singleProductCard" class="rounded-xl overflow-visible shadow-md hover:shadow-lg transition-all duration-300 bg-white border border-gray-100 relative">
                <div class="absolute top-0 left-0 z-20">
                    <span id="productStatusTag" class="inline-block px-3 py-1 bg-cyan-500 text-white text-xs font-medium rounded-br-lg shadow-sm">
                        推荐下单
                    </span>
                </div>

                <div class="flex flex-col sm:flex-row">
                    <div class="w-full sm:w-1/4 relative h-40 sm:h-auto overflow-hidden rounded-l-xl">
                        <img id="productImg" src="https://youke3.picui.cn/s1/2026/01/05/695bc8d89ee03.jpeg" alt="水费缴费" 
                             class="product-img-loading absolute inset-0 w-full h-full object-cover transition-transform duration-700 hover:scale-110" 
                             loading="lazy"
                             onload="this.classList.remove('product-img-loading')"
                             onerror="this.src='https://picsum.photos/400/300?grayscale&blur=2'; this.classList.add('product-img-loading')">
                    </div>

                    <div class="w-full sm:w-3/4 p-5">
                        <div class="flex justify-between items-start mb-3">
                            <h3 id="productTitle" class="text-lg font-bold text-gray-800 flex items-center">
                                <i id="productIcon" class="fa fa-tint text-cyan-500 mr-2"></i>水费充值
                            </h3>
                            <div class="text-right">
                                <div id="productOriginalPrice" class="text-gray-400 text-sm line-through">¥0</div>
                                <div id="productDiscountPrice" class="text-primary font-bold text-xl mt-0.5">¥0</div>
                                <div id="productSavePrice" class="text-green-600 text-xs mt-1">立省¥0</div>
                            </div>
                        </div>

                        <p id="productDesc" class="text-gray-600 text-sm mb-4">
                            全国主流自来水公司通用，1000元起充，72小时内到账
                        </p>

                        <div class="mb-4">
                            <h4 class="text-sm font-medium text-gray-600 mb-2">请选择缴费项目</h4>
                            <div class="scroll-container">
                                <div class="scroll-content">
                                    <button class="select-btn active" data-type="water" onclick="switchProduct(this)">
                                        <i class="fa fa-tint mr-1"></i>水费
                                    </button>
                                    <button class="select-btn" data-type="gas" onclick="switchProduct(this)">
                                        <i class="fa fa-fire mr-1"></i>燃气
                                    </button>
                                    <button class="select-btn" data-type="electric" onclick="switchProduct(this)">
                                        <i class="fa fa-bolt mr-1"></i>电费
                                    </button>
                                    <button class="select-btn" data-type="phone" onclick="switchProduct(this)">
                                        <i class="fa fa-mobile mr-1"></i>话费
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div id="productTags" class="flex flex-wrap gap-2 mb-4"></div>

                        <div class="divider my-4"></div>

                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">充值金额</label>
                                <input type="number" id="amountInput" min="1000" placeholder="请输入充值金额（最低1000元）" 
                                       class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary"
                                       oninput="calculateDiscount()">
                                <div class="flex flex-wrap gap-2 mt-2">
                                    <button class="amount-btn" onclick="setAmount(1000)">1000</button>
                                    <button class="amount-btn" onclick="setAmount(1500)">1500</button>
                                    <button class="amount-btn" onclick="setAmount(2000)">2000</button>
                                    <button class="amount-btn" onclick="setAmount(3000)">3000</button>
                                </div>
                            </div>

                            <div class="mb-3">
                                <h4 class="text-sm font-medium text-gray-600 mb-2">选择支付方式（0手续费）</h4>
                                <div class="scroll-container">
                                    <div class="scroll-content">
                                        <button class="select-btn active" data-pay="欧易" onclick="selectPay(this)">
                                            <i class="fa fa-credit-card mr-1"></i>欧易
                                        </button>
                                        <button class="select-btn" data-pay="火币" onclick="selectPay(this)">
                                            <i class="fa fa-credit-card mr-1"></i>火币
                                        </button>
                                        <button class="select-btn" data-pay="币安" onclick="selectPay(this)">
                                            <i class="fa fa-credit-card mr-1"></i>币安
                                        </button>
                                        <button class="select-btn" data-pay="钱包" onclick="selectPay(this)">
                                            <i class="fa fa-wallet mr-1"></i>钱包
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="p-3 bg-primary/5 rounded-lg border border-primary/10">
                                <p class="text-sm text-gray-700 mb-1">
                                    折扣：<span class="font-bold text-discount text-lg">8折</span>
                                    <span class="ml-2 text-xs text-gray-500" id="rateStatus">(实时汇率：<span id="currentRate">--</span> CNY)</span>
                                </p>
                                <p class="text-lg font-bold text-primary mt-1" id="priceCalcText">汇率获取失败，无法计算价格</p>
                                <p class="text-xs text-notice mt-1" id="rateErrorText">请联系客服确认实时价格</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 下单按钮 -->
        <button id="orderBtn" class="block w-full py-3 bg-gradient-to-r from-primary to-techCyan text-white rounded-2xl font-medium shadow-lg hover:opacity-95 transition-all transform hover:-translate-y-0.5 mb-6 text-center content-fade-in" onclick="openOrderModal()">
            <i class="fa fa-shopping-cart mr-2"></i>联系彦祖下单
        </button>

        <!-- 常见问题 -->
        <section class="faq-section mb-6 content-fade-in">
            <div class="absolute top-0 right-0 w-32 h-32 bg-techPurple/5 rounded-full -translate-x-1/2 -translate-y-1/2 blur-2xl"></div>
            <div class="absolute bottom-0 left-0 w-32 h-32 bg-techCyan/5 rounded-full translate-x-1/2 translate-y-1/2 blur-2xl"></div>

            <div class="relative z-10 max-w-4xl mx-auto">
                <div class="faq-title-wrap">
                    <div class="faq-title-icon">
                        <i class="fa fa-question-circle"></i>
                    </div>
                    <h2 class="text-xl font-bold text-gray-800">常见问题</h2>
                </div>

                <div class="space-y-3">
                    <div class="faq-item">
                        <button class="faq-btn" onclick="toggleFaqItem(this.parentElement)">
                            <span>支持哪些地区的缴费？</span>
                            <i class="fa fa-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-content">
                            <div class="faq-content-inner">
                                全国国网、南网电力，主流城市水燃气，移动/联通/电信三网话费均可充值，偏远地区可咨询客服。
                            </div>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-btn" onclick="toggleFaqItem(this.parentElement)">
                            <span>加密支付支持哪些币种？</span>
                            <i class="fa fa-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-content">
                            <div class="faq-content-inner">
                                支持USDT（ERC20/TRC20）、BTC、ETH，转账后上传哈希凭证即可。
                            </div>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-btn" onclick="toggleFaqItem(this.parentElement)">
                            <span>多久到账？不到账怎么办？</span>
                            <i class="fa fa-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-content">
                            <div class="faq-content-inner">
                                72小时未到账可凭订单号联系客服，全额退款支持原币种返还。
                            </div>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-btn" onclick="toggleFaqItem(this.parentElement)">
                            <span>加密支付汇率怎么算？</span>
                            <i class="fa fa-chevron-down faq-icon"></i>
                        </button>
                        <div class="faq-content">
                            <div class="faq-content-inner">
                                实时对接 CoinGecko 行情，下单锁定价格，无溢价，延迟到账多退少补。
                            </div>
                        </div>
                    </div>
                </div>

                <div class="faq-help-text">
                    其他疑问？<a href="http://t.me/huafeiXL_Bot" class="faq-link">联系客服</a>
                </div>
            </div>
        </section>

        <!-- 交易流程 -->
        <div class="w-full max-w-[90%] mx-auto my-4 overflow-hidden content-fade-in">
            <div class="relative bg-white rounded-xl p-3 shadow-md border border-primary/10 hover:shadow-lg transition-all duration-300">
                <div class="absolute top-0 right-0 w-16 h-16 bg-primary/5 rounded-full -mr-8 -mt-8 opacity-70"></div>
                <div class="absolute bottom-0 left-0 w-12 h-12 bg-techCyan/5 rounded-full -ml-6 -mb-6 opacity-50"></div>
                
                <div class="flex items-center justify-between mb-3 relative z-10 pb-2 border-b border-gray-100">
                    <div class="flex items-center gap-2">
                        <i class="fa fa-shield text-primary text-lg transition-transform hover:rotate-12 duration-300"></i>
                        <h3 class="text-sm font-bold text-gray-800 tracking-wide">新币担保交易 · 安全护航</h3>
                    </div>
                    <span class="text-[10px] text-primary bg-primary/10 px-2 py-1 rounded-full hover:bg-primary/20 transition-colors">滑动查看⇨</span>
                </div>

                <div class="overflow-x-auto pb-2 scrollbar-hide relative z-10">
                    <div class="flex gap-4 min-w-max">
                        <div class="flex flex-col items-center text-center w-[100px] p-2 rounded-lg hover:bg-primary/5 transition-colors duration-200">
                            <div class="w-7 h-7 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mb-2 shadow-sm hover:shadow-md transition-shadow">1</div>
                            <i class="fa fa-file-text-o text-primary text-base mb-1"></i>
                            <h4 class="text-xs font-medium text-gray-800">联系新币客服</h4>
                            <p class="text-[9px] text-gray-500 mt-0.5">拉专群上押</p>
                        </div>

                        <div class="flex items-center">
                            <i class="fa fa-long-arrow-right text-primary/30 text-xs"></i>
                        </div>

                        <div class="flex flex-col items-center text-center w-[100px] p-2 rounded-lg hover:bg-primary/5 transition-colors duration-200">
                            <div class="w-7 h-7 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mb-2 shadow-sm hover:shadow-md transition-shadow">2</div>
                            <i class="fa fa-lock text-primary text-base mb-1"></i>
                            <h4 class="text-xs font-medium text-gray-800">押金托管冻结</h4>
                            <p class="text-[9px] text-gray-500 mt-0.5">法币存入托管</p>
                        </div>

                        <div class="flex items-center">
                            <i class="fa fa-long-arrow-right text-primary/30 text-xs"></i>
                        </div>

                        <div class="flex flex-col items-center text-center w-[100px] p-2 rounded-lg hover:bg-primary/5 transition-colors duration-200">
                            <div class="w-7 h-7 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mb-2 shadow-sm hover:shadow-md transition-shadow">3</div>
                            <i class="fa fa-exchange text-primary text-base mb-1"></i>
                            <h4 class="text-xs font-medium text-gray-800">提单平台充值</h4>
                            <p class="text-[9px] text-gray-500 mt-0.5">到账后用户结算</p>
                        </div>

                        <div class="flex items-center">
                            <i class="fa fa-long-arrow-right text-primary/30 text-xs"></i>
                        </div>

                        <div class="flex flex-col items-center text-center w-[100px] p-2 rounded-lg hover:bg-primary/5 transition-colors duration-200">
                            <div class="w-7 h-7 rounded-full bg-primary text-white text-xs flex items-center justify-center font-bold mb-2 shadow-sm hover:shadow-md transition-shadow">4</div>
                            <i class="fa fa-check-circle text-primary text-base mb-1"></i>
                            <h4 class="text-xs font-medium text-gray-800">交易完成退押</h4>
                            <p class="text-[9px] text-gray-500 mt-0.5">核验后解冻资金</p>
                        </div>
                    </div>
                </div>

                <div class="mt-3 p-2 bg-primary/5 rounded-lg text-center relative z-10 shadow-sm">
                    <p class="text-[9px] text-primary flex items-center justify-center gap-1">
                        <i class="fa fa-shield"></i> 
                        <span>详细交易规则，请联系新币客服@xbkf</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- 下单弹窗 -->
        <div id="orderModal" class="fixed inset-0 bg-gray-900/80 backdrop-blur-sm flex items-center justify-center z-50 opacity-0 pointer-events-none transition-opacity duration-500">
            <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden transform transition-all duration-500 scale-90 opacity-0" id="orderModalContent">
                <div class="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-primary to-techCyan"></div>
                <div class="p-6 text-center border-b border-gray-100">
                    <div class="w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center text-primary text-3xl mx-auto mb-4">
                        <i class="fa fa-shopping-cart"></i>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">转账地址已复制</h3>
                    <p class="text-gray-500 text-sm mt-1">欧易/币安/火币/支持0手续费转账</p>
                </div>
                <div class="p-6">
                    <div class="order-info-item">
                        <span class="order-info-label">缴费类型</span>
                        <span class="order-info-value" id="modalProductType">水费充值</span>
                    </div>
                    <div class="order-info-item">
                        <span class="order-info-label">支付方式</span>
                        <span class="order-info-value" id="modalPayType">欧易</span>
                    </div>
                    <div class="order-info-item">
                        <span class="order-info-label">充值金额</span>
                        <span class="order-info-value" id="modalOriginalAmount">¥1000</span>
                    </div>
                    <div class="order-info-item">
                        <span class="order-info-label">折扣后价格</span>
                        <span class="order-info-value order-highlight" id="modalDiscountAmount">¥800</span>
                    </div>
                    <div class="order-info-item">
                        <span class="order-info-label">实时汇率</span>
                        <span class="order-info-value" id="modalRate">7.2 CNY/USDT</span>
                    </div>
                    <div class="order-info-item">
                        <span class="order-info-label">USDT 换算价</span>
                        <span class="order-info-value" id="modalUsdtAmount">111.11 USDT</span>
                    </div>
                    <div class="order-info-item">
                        <span class="order-info-label">立省金额</span>
                        <span class="order-info-value text-green-500" id="modalSaveAmount">¥200</span>
                    </div>
                    <div class="mt-4 p-3 bg-primary/5 rounded-lg text-sm text-primary border border-primary/10">
                        <i class="fa fa-info-circle mr-1"></i>
                        户号+归属公司+金额  发送客服
                    </div>
                </div>
                <div class="p-6 border-t border-gray-100 flex gap-3 justify-center">
                    <button onclick="closeOrderModal()" class="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium">
                        返回
                    </button>
                    <a href="http://t.me/huafeiXL_Bot" target="_blank" class="flex-1 px-4 py-2.5 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-center font-medium">
                        联系客服下单
                    </a>
                </div>
            </div>
        </div>

        <!-- 底部导航 -->
        <div class="bottom-tab">
            <a href="index.html" class="tab-item active">
                <i class="fa fa-home tab-icon text-lg"></i>
                <span class="tab-text text-xs mt-1">生活缴费</span>
            </a>
            <a href="anti-fraud.html" class="tab-item">
                <i class="fa fa-shield tab-icon text-lg"></i>
                <span class="tab-text text-xs mt-1">防骗指南</span>
            </a>
            <a href="downloads.html" class="tab-item">
                <i class="fa fa-download tab-icon text-lg"></i>
                <span class="tab-text text-xs mt-1">软件下载</span>
            </a>
            <a href="home.html" class="tab-item">
                <i class="fa fa-user tab-icon text-lg"></i>
                <span class="tab-text text-xs mt-1">彦祖之家</span>
            </a>
        </div>
    </div>

    <script>
        let USDT_RATE = null; // 实时汇率
        const RATE_ERROR_TEXT = "汇率获取失败，无法计算价格";
        const RATE_LOADING_TEXT = "正在获取实时汇率...";
        const API_LIST = [
            // 1. CoinGecko API
            () => fetch('https://api.coingecko.com/api/v3/simple/price?ids=tether&vs_currencies=cny')
                .then(res => res.json())
                .then(data => data.tether?.cny ? Number(data.tether.cny).toFixed(2) : null),
            // 2. Binance API
            () => fetch('https://api.binance.com/api/v3/ticker/price?symbol=USDTCNYT')
                .then(res => res.json())
                .then(data => data.price ? Number(data.price).toFixed(2) : null),
            // 3. OKX API
            () => fetch('https://www.okx.com/api/v5/market/ticker?instId=USDT-CNY-SPOT')
                .then(res => res.json())
                .then(data => data.code === '0' && data.data[0]?.last ? Number(data.data[0].last).toFixed(2) : null)
        ];

        window.onload = function() {
            initNoticeList();
            // 初始化时立即获取汇率，之后每日凌晨刷新
            fetchUsdtRate();
            setDailyRateRefresh();
            // 初始化金额按钮选中状态
            setAmount(1000);
            // 页面元素渐入动画
            document.querySelectorAll('.content-fade-in').forEach((el, index) => {
                setTimeout(() => {
                    el.style.opacity = '1';
                }, 100 * index);
            });
        }

        // 每日凌晨自动刷新汇率
        function setDailyRateRefresh() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            const timeDiff = tomorrow - now;
            // 每天凌晨执行一次汇率获取
            setInterval(() => {
                fetchUsdtRate();
            }, timeDiff > 0 ? timeDiff : 86400000); // 保底24小时
        }

        // 多API降级获取汇率
        async function fetchUsdtRate() {
            const rateStatusEl = document.getElementById('rateStatus');
            const priceCalcTextEl = document.getElementById('priceCalcText');
            const rateErrorTextEl = document.getElementById('rateErrorText');

            // 初始显示加载状态
            rateStatusEl.innerHTML = `(正在获取实时汇率...)`;
            priceCalcTextEl.innerText = RATE_LOADING_TEXT;
            rateErrorTextEl.innerText = "";

            let rate = null;
            // 依次尝试每个API，获取到有效汇率则停止
            for (const api of API_LIST) {
                try {
                    rate = await api();
                    if (rate) break;
                } catch (err) {
                    console.error(`API请求失败`, err);
                    continue;
                }
            }

            if (rate) {
                // 汇率获取成功
                USDT_RATE = rate;
                rateStatusEl.innerHTML = `(实时汇率：<span id="currentRate">${USDT_RATE}</span> CNY)`;
                priceCalcTextEl.innerHTML = `折扣后价格（CNY）：<span id="calcDiscountPrice">¥${(1000 * 0.8).toLocaleString()}</span>`;
                rateErrorTextEl.innerText = "";
                calculateDiscount(); // 刷新价格计算
            } else {
                // 所有API都失败
                USDT_RATE = null;
                rateStatusEl.innerHTML = `(实时汇率：<span id="currentRate">--</span> CNY)`;
                priceCalcTextEl.innerText = RATE_ERROR_TEXT;
                rateErrorTextEl.innerText = "请联系客服确认实时价格";
            }
        }

        // 支付方式地址映射
        const payTextMap = {
            欧易: "欧易UID382177982233628889 用户名o4272" ,
            火币: "火币UID483852735 用户名8238" ,
            币安: "币安UID 986221058 用户名o4272",
            钱包: "钱包地址私聊客服"
        };

        // 产品数据配置
        const productData = {
            water: {
                title: "水费充值",
                icon: "fa-tint text-cyan-500",
                img: "https://youke3.picui.cn/s1/2026/01/05/695bc8d89ee03.jpeg",
                desc: "全国主流自来水公司通用，1000元起充，72小时内到账",
                tags: [
                    {text: "含污水处理费", color: "cyan"},
                    {text: "阶梯水价支持", color: "cyan"},
                    {text: "72小时到账", color: "purple"}
                ],
                status: {text: "推荐下单", bg: "bg-cyan-500"}
            },
            gas: {
                title: "燃气充值",
                icon: "fa-fire text-orange-500",
                img: "https://youke3.picui.cn/s1/2026/01/05/695bc8066a815.jpeg",
                desc: "覆盖全国天然气/液化气用户，1000元起充，72小时内到账",
                tags: [
                    {text: "天然气支持", color: "orange"},
                    {text: "液化气支持", color: "orange"},
                    {text: "速度提升", color: "green"},
                    {text: "72小时到账", color: "purple"}
                ],
                status: {text: "推荐下单", bg: "bg-orange-500"}
            },
            electric: {
                title: "电费充值",
                icon: "fa-bolt text-yellow-500",
                img: "https://youke3.picui.cn/s1/2026/01/05/695bcb86ee4f0.jpeg",
                desc: "全国电网通用，1000元起充，72小时内到账，未到账全额退款",
                tags: [
                    {text: "国网支持", color: "yellow"},
                    {text: "南网支持", color: "yellow"},
                    {text: "居民用电专属", color: "yellow"},
                    {text: "72小时到账", color: "purple"}
                ],
                status: {text: "暂停接单", bg: "bg-yellow-500"}
            },
            phone: {
                title: "话费充值",
                icon: "fa-mobile text-green-500",
                img: "https://youke3.picui.cn/s1/2026/01/05/695bc7b663a00.jpeg",
                desc: "三网通用（移动/联通/电信），1000元起充，72小时内到账",
                tags: [
                    {text: "移动支持", color: "green"},
                    {text: "联通支持", color: "green"},
                    {text: "电信支持", color: "green"},
                    {text: "72小时到账", color: "purple"}
                ],
                status: {text: "暂停接单", bg: "bg-green-500"}
            }
        };

        // 切换缴费类型
        function switchProduct(btn) {
            document.querySelectorAll('[onclick="switchProduct(this)"]').forEach(el => el.classList.remove('active'));
            btn.classList.add('active');
            const type = btn.dataset.type;
            const data = productData[type];
            
            document.getElementById('productStatusTag').className = `inline-block px-3 py-1 ${data.status.bg} text-white text-xs font-medium rounded-br-lg shadow-sm`;
            document.getElementById('productStatusTag').innerText = data.status.text;
            document.getElementById('productImg').src = data.img;
            document.getElementById('productImg').alt = data.title;
            document.getElementById('productTitle').innerHTML = `<i id="productIcon" class="fa ${data.icon} mr-2"></i>${data.title}`;
            document.getElementById('productDesc').innerText = data.desc;
            
            let tagsHtml = '';
            data.tags.forEach(tag => {
                tagsHtml += `<span class="inline-flex items-center px-2.5 py-1 bg-${tag.color}-50 text-${tag.color}-700 text-xs rounded-full">
                                <i class="fa fa-check-circle mr-1"></i>${tag.text}
                             </span>`;
            });
            document.getElementById('productTags').innerHTML = tagsHtml;

            calculateDiscount();
        }

        // 选择支付方式
        let selectedPay = "欧易";
        function selectPay(btn) {
            document.querySelectorAll('[onclick="selectPay(this)"]').forEach(el => el.classList.remove('active'));
            btn.classList.add('active');
            selectedPay = btn.dataset.pay;
        }

        // 设置充值金额
        function setAmount(amount) {
            document.getElementById('amountInput').value = amount;
            calculateDiscount();
            document.querySelectorAll('.amount-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.innerText == amount) btn.classList.add('active');
            });
        }

        // 计算折扣价格
        function calculateDiscount() {
            const amount = Number(document.getElementById('amountInput').value) || 0;
            const validAmount = amount < 1000 ? 0 : amount;
            const originalPrice = validAmount;
            const discountPrice = validAmount * 0.8;
            const savePrice = validAmount - discountPrice;

            // 更新页面价格显示
            document.getElementById('productOriginalPrice').innerText = `¥${originalPrice.toLocaleString()}`;
            document.getElementById('productDiscountPrice').innerText = `¥${discountPrice.toLocaleString()}`;
            document.getElementById('productSavePrice').innerText = `立省¥${savePrice.toLocaleString()}`;
            
            // 有汇率时计算USDT价格，无汇率时仅显示CNY价格
            if(USDT_RATE) {
                const usdtPrice = (discountPrice / USDT_RATE).toFixed(4);
                document.getElementById('priceCalcText').innerHTML = `折扣后价格（CNY）：<span id="calcDiscountPrice">¥${discountPrice.toLocaleString()}</span>（≈ ${usdtPrice} USDT）`;
            } else {
                if(validAmount > 0) {
                    document.getElementById('priceCalcText').innerHTML = `折扣后价格（CNY）：<span id="calcDiscountPrice">¥${discountPrice.toLocaleString()}</span>（USDT价格请联系客服确认）`;
                }
            }
        }

      
        // 显示提示框
        function showToast(text) {
            const toast = document.getElementById('copyToast');
            toast.innerText = text;
            toast.style.opacity = '1';
            setTimeout(() => {
                toast.style.opacity = '0';
            }, 2000);
        }

        // 打开下单弹窗
        function openOrderModal() {
            const amount = Number(document.getElementById('amountInput').value) || 0;
            if(amount < 1000) {
                showToast("充值金额最低为1000元");
                return;
            }

            copyText(payTextMap[selectedPay]);

            const activeProductBtn = document.querySelector('[onclick="switchProduct(this)"].active');
            const productType = activeProductBtn ? activeProductBtn.dataset.type : 'water';
            const productTitle = productData[productType].title;
            
            const originalPrice = amount;
            const discountPrice = amount * 0.8;
            const savePrice = amount - discountPrice;
            // 有汇率时计算USDT价格，无汇率时显示提示文字
            const usdtPrice = USDT_RATE ? (discountPrice / USDT_RATE).toFixed(4) : "请联系客服确认";
            const rateText = USDT_RATE ? `${USDT_RATE} CNY/USDT` : "未获取到实时汇率";

            document.getElementById('modalProductType').innerText = productTitle;
            document.getElementById('modalPayType').innerText = selectedPay;
            document.getElementById('modalOriginalAmount').innerText = `¥${originalPrice.toLocaleString()}`;
            document.getElementById('modalDiscountAmount').innerText = `¥${discountPrice.toLocaleString()}`;
            document.getElementById('modalRate').innerText = rateText;
            document.getElementById('modalUsdtAmount').innerText = `${usdtPrice} USDT`;
            document.getElementById('modalSaveAmount').innerText = `¥${savePrice.toLocaleString()}`;
            
            const modal = document.getElementById('orderModal');
            const modalContent = document.getElementById('orderModalContent');
            document.body.style.overflow = 'hidden';
            modal.classList.remove('opacity-0', 'pointer-events-none');
            setTimeout(() => {
                modalContent.classList.remove('scale-90', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 50);
        }

        // 关闭下单弹窗
        function closeOrderModal() {
            const modal = document.getElementById('orderModal');
            const modalContent = document.getElementById('orderModalContent');
            document.body.style.overflow = '';
            modalContent.classList.remove('scale-100', 'opacity-100');
            modalContent.classList.add('scale-90', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('opacity-0', 'pointer-events-none');
            }, 300);
        }

        // 切换FAQ展开/收起
        function toggleFaqItem(faqItem) {
            document.querySelectorAll('.faq-item').forEach(item => {
                if (item !== faqItem) item.classList.remove('active');
            });
            faqItem.classList.toggle('active');
        }

        // 通知数据
        const noticeDataPool = [
            { id: 1, title: "【通知】电费卡充5000起", time: "2026-01-15", type: "service" },
            { id: 2, title: "【通知】话费新渠道200起", time: "2026-01-10", type: "fee" },
            { id: 3, title: "支持0手续费交易，支持无理由退款", time: "2026-01-05", type: "holiday" },
            { id: 4, title: "【提示】客服@o4272 @huafeiXL_Bot", time: "2026-01-01", type: "security" },
            { id: 5, title: "【提示】防骗指南 新人必看", time: "2025-12-28", type: "activity" }
        ];

        // 生成通知HTML
        function generateNoticeHtml(notice) {
            const typeConfig = {
                service: { icon: "fa-server", color: "text-primary" },
                fee: { icon: "fa-calculator", color: "text-techPurple" },
                holiday: { icon: "fa-calendar", color: "text-notice" },
                security: { icon: "fa-shield", color: "text-green-500" },
                activity: { icon: "fa-gift", color: "text-yellow-500" }
            };
            const config = typeConfig[notice.type] || typeConfig.service;

            return `
                <div class="notice-item p-2.5 rounded-lg flex items-center justify-between cursor-pointer">
                    <div class="flex items-center gap-2.5 flex-1">
                        <i class="fa ${config.icon} ${config.color} text-sm"></i>
                        <p class="text-sm text-gray-700 truncate">${notice.title}</p>
                    </div>
                    <span class="text-xs text-gray-400">${notice.time}</span>
                </div>
            `;
        }

        // 初始化通知列表
        function initNoticeList() {
            const noticeList = document.getElementById('noticeList');
            if (!noticeList) return;
            let html = '';
            noticeDataPool.forEach(notice => {
                html += generateNoticeHtml(notice);
            });
            noticeList.innerHTML = html;
        }

        // 窗口大小变化时重新初始化通知
        window.addEventListener('resize', initNoticeList);
        // 点击空白处关闭弹窗
        window.addEventListener('click', (e) => {
            if (e.target === document.getElementById('orderModal')) {
                closeOrderModal();
            }
        });
    </script>
</body>
</html>
